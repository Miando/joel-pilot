
{% extends 'craigs/base.html' %}
{% load my_text %}
{% block title %}List of Tasks{% endblock %}
{% block body %}



<div id="middle">
    <Select id="mainselector" style="width: 170px">
        <option disabled="" selected="" value="">options</option>
       <option value="without_url">without_url</option>
       <option value="with_url">with_url</option>

    </Select>

<form  method="post" action="{%url 'craigs:create_task' %}" enctype="multipart/form-data">
        {% csrf_token %}
    <input style="width: 170px" name="job_name" type="text" placeholder="name of task">

<div id="with_url" class="variants" style="display:none">
    <br>

    <input style="width: 170px" name="url1" type="text" placeholder="link">
    <br>
    <input style="width: 170px" name="stop_word" type="text" placeholder="negative keywords">
    <br>
    <input class="btn btn-primary" type="submit" value="Create Task">

</div>
<div id="without_url" class="variants" style="display:none">
    <br>





    <select style="width: 170px" id="state" name="state">
       <option disabled="" selected="" value="">state</option>
                    </select>
                    <br/>
    <select style="width: 170px" id="cities" name="village">
        <!--<option disabled="" selected="" value="">subcategory</option>-->
    </select>
<br>
    <br/>
   <select style="width: 170px" id="firstmenu" name="category">
       <option disabled="" selected="" value="">category</option>
                    </select>
                    <br/>
    <select style="width: 170px" id="secondmenu" name="subcategory">
        <!--<option disabled="" selected="" value="">subcategory</option>-->
    </select>
<br>

    <!--<input name="keyword" type="text" placeholder="search keyword"/>-->
   <input style="width: 170px" name="keyword" maxlength="250" id="id_keyword" type="text" placeholder="search keyword">
    <br>
{% for key, value in additional_options.items %}
<label class="{{key|replace_plus}}">
{% for q in value %}
    {% with forloop.counter as n %}
    {{forloop.counter}}
    {% for k,v in q.items %}

                        <input name="option{{n}}"  value="{{v}}" type="checkbox">
                        {{k}}
    <br>
    {% endfor %}
    {% endwith %}
    {% endfor %}
                        </label>

{% endfor %}
    <br>

    <input class="btn btn-primary" type="submit" value="Create Task">
    </div>
</form>


<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
------------------------------------------------------
 <!--<fieldset class="question">-->
       <!--<label >Do you have a coupon?</label>-->
       <!--<input class="coupon_question" type="checkbox" name="coupon_question" value="1" />-->
       <!--<span class="item-text">Yes</span>-->
   <!--</fieldset>-->

   <!--<fieldset class="answer">-->
       <!--<label for="coupon_field">Your coupon:</label>-->
       <!--<input type="text" name="coupon_field" id="coupon_field"/>-->
   <!--</fieldset>-->
   <!--<select id="firstmenu" name="category">-->
                    <!--</select>-->
                    <!--<br/>-->
                    <!--<select id="secondmenu" name="option2">-->
                    <!--</select>-->
        <!--<label class="hasPic">-->
                        <!--<input name="option1" class="autosubmit" value="hasPic=1" type="checkbox">-->
                        <!--has image-->
                        <!--</label>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->




<script type="text/javascript">
var items = [
    {% for key, value in categories.items %}
    {
        name:'{{key}}',
        value: '{{key}}',
        subitems: [
        {name: '---', value: '', disabled: '', selected: ''},
        {% for val in value %}
        {% for a,b in val.items %}
            {name: '{{a}}', value: '{{b}}'},
        {% endfor %}
        {% endfor %}
        ]
    },
    {% endfor %}

];
var items2 = [
    {% for key, value in cities.items %}
    {
        name:'{{key}}',
        value: '{{key}}',
        subitems: [
        {name: '---', value: '', disabled: '', selected: ''},

            {% for val in value %}
        {% for a,b in val.items %}
            {name: '{{b}}', value: '{{a}}'},
        {% endfor %}
        {% endfor %}

        ]
    },
    {% endfor %}

];
$(function(){
    var temp = {};

    $.each(items2, function(){
        $("<option />")
        .attr("value", this.value)
        .attr('style', 'width: 170px')
        .html(this.name)
        .appendTo("#state");
        temp[this.value] = this.subitems;
    });

    $("#state").change(function(){
        var value = $(this).val();
        var menu = $("#cities");

        menu.empty();
        $.each(temp[value], function(){
            $("<option />")
            .attr("value", this.value)
            .attr('style', 'width: 170px')
            .html(this.name)
            .appendTo(menu);
        });
    }).change();

});
$(function(){
    var temp = {};

    $.each(items, function(){
        $("<option />")
        .attr("value", this.value)
        .attr('style', 'width: 170px')
        .html(this.name)
        .appendTo("#firstmenu");
        temp[this.value] = this.subitems;
    });

    $("#firstmenu").change(function(){
        var value = $(this).val();
        var menu = $("#secondmenu");

        menu.empty();
        $.each(temp[value], function(){
            $("<option />")
            .attr("value", this.value)
            .attr('style', 'width: 170px')
            .html(this.name)
            .appendTo(menu);
        });
    }).change();


});
{% for key, value in additional_options.items %}
$(".{{key|replace_space}}").hide();
console.log("{{key|replace_space}}");
{% endfor %}
<!--$(".hasPic").hide();-->

$("#secondmenu").change(function() {
    if($(this).find('option:selected').text() == "ofc") {

        $(".hasPic").show();
    }
    {% for key, value in additional_options.items %}
    else if ($(this).find('option:selected').text() == "{{key}}"){
    $(".{{key|replace_space}}").show().siblings("label").hide();
    }
    {% endfor %}
    else {
        {% for key, value in additional_options.items %}
    $(".{{key}}").hide();
    {% endfor %}
    }
});

$(function() {
        $('#mainselector').change(function(){
            $('.variants').hide();
            $('#' + $(this).val()).show();
        });
    });
<!--$(".answer").hide();-->
<!--$(".coupon_question").click(function() {-->
    <!--if($(this).is(":checked")) {-->
        <!--$(".answer").show();-->
    <!--} else {-->
        <!--$(".answer").hide();-->
    <!--}-->
<!--});-->
</script>

<!--{% if error_message %}-->
    <!--<p><strong>{{error_message}}</strong></p>-->
<!--{% endif %}-->

<!--<div class="card" style="width: 20rem;">-->
  <!--<img class="card-img-top" src="..." alt="Card image cap">-->
  <!--<div class="card-block">-->
    <!--<h4 class="card-title">Card title</h4>-->
    <!--<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>-->
    <!--<a href="#" class="btn btn-primary">Go somewhere</a>-->
  <!--</div>-->
<!--</div>-->
<!--<form  method="post" action="{%url 'craigs:create_task' %}" enctype="multipart/form-data">-->
        <!--{% csrf_token %}-->
    <!--<ul>-->
        <!--<li>-->
            <!--<div class="card-columns">-->
            <!--<div class="card">-->
              <!--<div class="card-block">-->

                  <!--<br>-->





                  <!--<input type="submit" value="Create Task">-->
              <!--</div>-->
            <!--</div>-->
            <!--</div>-->
        <!--</li>-->
    <!--</ul>-->
<!--</div>-->
<!--</form>-->
<!--</div>-->




<!--{% endblock %}-->

</div>